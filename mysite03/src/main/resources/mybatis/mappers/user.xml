<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">
	<insert id="insert" parameterType="uservo">
		<![CDATA[
		insert
		  into user
		values (null, #{name }, #{email }, #{password }, #{gender }, now())
		 where 1 < no
		 ]]>
	</insert>
	
	<!-- map: java에 있는 기본 데이터 타입을 가져옴, 기본 데이터 타입이면서 여러 파라미터를 받을 때 사용하는 것 같음 -->
	<select id="findByEmailAndPassword" resultType="uservo" parameterType="map">
		<![CDATA[
		select no, name
		  from user
		 where email=#{email } and password=#{password }
		]]>
	</select>
	
	<select id="findByNo" resultType="uservo" parameterType="long">
	<!-- Long과 같은 기본타입(String, int..)이면서 1개로 들어오는 파라미터는 #{}에 아무 단어를 넣어도 되지만 표현상 맞는 것을 두도록한다. -->
	<!-- #{no } 말고 #{wnstjs}을 넣어도 됨 -->
		<![CDATA[
		select name, email, gender
		  from user
		 where no=#{no }
		]]>
	</select>
	
	<update id="update"  parameterType="uservo">
		<choose>
			<when test='password == ""'>
			<![CDATA[
			update user
			   set name=#{name }, gender=#{gender }
			 where no=#{no }
			]]>
			</when>
			<otherwise>
			<![CDATA[
			update user
			   set name=#{name }, password=#{password }, gender=#{gender }
			 where no=#{no }
			]]>
			</otherwise>
		</choose>
	</update>
	
</mapper>